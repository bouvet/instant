!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("rxjs"),require("element-closest"),require("@angular/material"),require("moment"),require("@angular/forms"),require("@angular/cdk/collections"),require("@angular/router"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("instant",["exports","@angular/core","@angular/common","rxjs","element-closest","@angular/material","moment","@angular/forms","@angular/cdk/collections","@angular/router","rxjs/operators"],e):e(t.instant={},t.ng.core,t.ng.common,t.rxjs,null,t.ng.material,t.moment_,t.ng.forms,t.ng.cdk.collections,t.ng.router,t.rxjs.operators)}(this,function(t,n,r,s,e,o,a,i,l,m,u){"use strict";var c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function p(t,e){function n(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function f(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||0<e--)&&!(r=a.next()).done;)i.push(r.value)}catch(l){o={error:l}}finally{try{r&&!r.done&&(n=a["return"])&&n.call(a)}finally{if(o)throw o.error}}return i}var d=function E(){this.attribute=null,this.lookupEntity=null,this.lookupAttribute=null,this.dataType=null,this.operator=null},h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.key=null,t}return p(t,e),t}(d),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fromDate=null,t.toDate=null,t}return p(t,e),t}(d),y=function(){function e(t){this.datePipe=t,this.templateName=e.DEFAULT_FILTER_TEMPLATE,this.filterable=!0,this.sortable=!0,this.sticky=!1,this.instantStyle={},this.dataType="String",this.isFilterSet=!1,this.filter=new s.ReplaySubject,this.initialOperator=null}return e.prototype.ngOnInit=function(){switch(null==this.label&&(this.label=this.name),null==this.templateName&&(this.templateName=e.DEFAULT_FILTER_TEMPLATE),this.templateName){case e.DEFAULT_FILTER_TEMPLATE:this.operators=this.operators?this.operators:["CONTAINS","STARTS_WITH","ENDS_WITH","EQUALS","NOT_EQUALS","IS_NULL","IS_NOT_NULL"],this.operator=this.operator?this.operator:"CONTAINS";break;case e.DATE_FILTER_TEMPLATE:this.operators=this.operators?this.operators:["IS_NULL","IS_NOT_NULL"],this.operator=this.operator?this.operator:"EQUALS";break;default:this.operators=null}this.initialOperator=this.operator},e.prototype.setFilter=function(t,e){void 0===e&&(e=!1),t&&("object"==typeof t?(this.attribute=t.hasOwnProperty("attribute")&&t.attribute&&t.attribute!==this.attribute?t.attribute:this.attribute,this.lookupAttribute=t.hasOwnProperty("lookupAttribute")&&t.lookupAttribute&&t.lookupAttribute!==this.lookupAttribute?t.lookupAttribute:this.lookupAttribute,this.lookupEntity=t.hasOwnProperty("lookupEntity")&&t.lookupEntity&&t.lookupEntity!==this.lookupEntity?t.lookupEntity:this.lookupEntity,this.operator=t.hasOwnProperty("operator")&&t.operator&&t.operator!==this.operator?t.operator:this.operator,this.dataType=t.hasOwnProperty("dataType")&&t.dataType&&t.dataType!==this.dataType?t.dataType:this.dataType):t=this.convertPrimitiveToFilter(t)),this.setFilterValue(t,e),this.isFilterSet=!0!==e||null!==t},e.prototype.convertPrimitiveToFilter=function(t){var e=new h;return e.attribute=this.attribute,e.lookupAttribute=this.lookupAttribute,e.lookupEntity=this.lookupEntity,e.operator=this.operator,e.key=t,e.dataType=this.dataType,e},e.prototype.setFilterValue=function(t,e){void 0===e&&(e=!1),t===this.oldFilter&&null!==t||(this.oldFilter=Object.assign({},this.filterValue),this.filterValue=t,e||this.filter.next({active:this.name,filter:t})),this.filterOpen=!1},e.prototype.setFromDate=function(t){if("dateFilterTemplate"===this.templateName){var e=this.filterValue?this.filterValue:new g;e.attribute=this.attribute,e.lookupAttribute=this.lookupAttribute,e.lookupEntity=this.lookupEntity,e.operator=this.operator,e.dataType=this.dataType,e.fromDate=this.toDbDateString(t),this.setFilterValue(e)}},e.prototype.setToDate=function(t){if("dateFilterTemplate"===this.templateName){var e=this.filterValue?this.filterValue:new g;e.attribute=this.attribute,e.lookupAttribute=this.lookupAttribute,e.lookupEntity=this.lookupEntity,e.operator=this.operator,e.dataType=this.dataType,e.toDate=this.toDbDateString(t),this.setFilterValue(e)}},e.prototype.toDbDateString=function(t){return null==t?null:this.datePipe.transform(t,"dd-MM-yyyy")},e.prototype.setOperator=function(t){this.operator=t,this.filterValue&&"object"==typeof this.filterValue?this.filterValue.operator=t:this.filterValue=this.convertPrimitiveToFilter(null),this.setFilterValue(this.filterValue),this.isFilterSet=!0},e.prototype.removeFilter=function(){this.operator=this.initialOperator?this.initialOperator:"CONTAINS",this.setFilterValue(null),this.isFilterSet=!1},e.DEFAULT_FILTER_TEMPLATE="defaultFilterTemplate",e.DATE_FILTER_TEMPLATE="dateFilterTemplate",e.decorators=[{type:n.Directive,args:[{selector:"instant-column"}]}],e.ctorParameters=function(){return[{type:r.DatePipe}]},e.propDecorators={templateName:[{type:n.Input}],name:[{type:n.Input}],label:[{type:n.Input}],filterable:[{type:n.Input}],sortable:[{type:n.Input}],sticky:[{type:n.Input}],instantStyle:[{type:n.Input,args:["instant-style"]}],operators:[{type:n.Input}],attribute:[{type:n.Input}],lookupAttribute:[{type:n.Input}],lookupEntity:[{type:n.Input}],dataType:[{type:n.Input}],operator:[{type:n.Input}],filterRef:[{type:n.ContentChild,args:["filter"]}],cellRef:[{type:n.ContentChild,args:["cell"]}]},e}(),b=a,v=function(){function t(t){this.elRef=t,this.rowClicked=new n.EventEmitter}return Object.defineProperty(t.prototype,"displayedColumns",{get:function(){return this._displayedColumns=this._displayedColumns||(this.columns?this.columns.map(function(t){return t.name}):null)},set:function(t){this._displayedColumns=t},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){this.columns&&this.columns.length&&this.dataSource.db._configure({sortChange:this.sort.sortChange,filterChange:s.merge.apply(void 0,function n(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}(this.columns.map(function(t){return t.filter})))})},t.prototype.ngOnDestroy=function(){this.subscriptions&&this.subscriptions.length&&this.subscriptions.map(function(t){return t.unsubscribe()})},t.prototype.onRowClicked=function(t,e){if(null===e.target.closest("instant-grid-row-menu")){var n=[].slice.call(e.target.closest("td").classList).find(function(t){return-1<t.indexOf("mat-column-")}).substr("mat-column-".length);this.rowClicked.emit({data:t,colName:n})}},t.prototype.onClick=function(e){var n=[].slice.call(this.elRef.nativeElement.querySelectorAll("th")).filter(function(t){return!t.contains(e.target)}).map(function(t){return[].slice.call(t.classList).find(function(t){return-1<t.indexOf("mat-column-")}).substr("mat-column-".length)});this.columns.filter(function(t){return n.includes(t.name)}).forEach(function(t){return t.filterOpen=!1})},t.prototype.checkClose=function(t,e){"Enter"===t.key&&e.closeMenu()},t.prototype.onFilterChange=function(t,e){e.setFilter(t.target.value)},t.prototype.onOperatorChange=function(t,e){e.setOperator(t)},t.prototype.onFromDateChange=function(t,e){console.log("instant grid component - onFromDateChange "),e.setFromDate(t?t.target.value:null)},t.prototype.onToDateChange=function(t,e){console.log("instant grid component - onToDateChange "),e.setToDate(t?t.target.value:null)},t.prototype.getFilterValue=function(t){return t.filterValue?"object"==typeof t.filterValue?t.filterValue.key:t.filterValue:""},t.prototype.toDate=function(t){return null==t?null:"string"==typeof t?b(t,"DD-MM-YYYY").toDate():t?new Date(t):null},t.prototype.getFromDate=function(t){return t.filterValue?"object"!=typeof t.filterValue?new Date(t.filterValue):this.toDate(t.filterValue.fromDate):null},t.prototype.getToDate=function(t){return t.filterValue?"object"!=typeof t.filterValue?new Date(t.filterValue):this.toDate(t.filterValue.toDate):null},t.prototype.getOperator=function(t){return console.log("instant grid component - getOperator "+t.name),t&&t.hasOwnProperty("operator")?t.operator:null},t.prototype.getRowClasses=function(t){var e=[];if(t===this.selectedIndex&&e.push("highlight"),this.rowAttributes&&0<this.rowAttributes.length)for(var n=this.rowAttributes,r=0;r<n.length;r++)n[r].index===t&&n[r]["class"]&&0<n[r]["class"].length&&(e=e.concat(n[r]["class"]));return e.join(" ")},t.prototype.getRowStyles=function(t){var e=[];if(this.rowAttributes&&0<this.rowAttributes.length)for(var n=this.rowAttributes,r=0;r<n.length;r++)n[r].index===t&&n[r].style&&0<n[r].style.length&&(e=e.concat(n[r].style));return e.join(" ")},t.prototype.removeFilter=function(t){t.removeFilter()},t.prototype.removeFilters=function(){console.log("instant grid component - removeFilters"),this.columns.forEach(function(t){t.removeFilter()})},t.prototype.reload=function(){console.log("instant grid component - reload"),this.columns.forEach(function(t,e){0===e&&t.removeFilter()})},t.decorators=[{type:n.Component,args:[{selector:"instant-grid",template:'<table mat-table #table [dataSource]="dataSource" matSort>\r\n  <ng-container *ngFor="let col of columns; let i = index" [matColumnDef]="col.name" [sticky]="col.sticky">\r\n    \x3c!-- Header definition --\x3e\r\n    <th mat-header-cell *matHeaderCellDef [ngStyle]="col.instantStyle">\r\n      <header>\r\n        <div class="action" *ngIf="col.filterable != false">\r\n          <mat-menu #appMenu="matMenu">\r\n            <ng-container *ngIf="col.filterRef">\r\n              <ng-container *ngTemplateOutlet="col.filterRef;context:{col:col}"></ng-container>\r\n            </ng-container>\r\n            <ng-container *ngIf="!col.filterRef && col.templateName === \'defaultFilterTemplate\'">\r\n              <ng-container *ngTemplateOutlet="defaultFilterTemplate;context:{col:col}"></ng-container>\r\n            </ng-container>\r\n            <ng-container *ngIf="!col.filterRef && col.templateName === \'dateFilterTemplate\'">\r\n              <ng-container *ngTemplateOutlet="dateFilterTemplate;context:{col:col}"></ng-container>\r\n            </ng-container>\r\n\r\n            <ng-template #defaultFilterTemplate>\r\n              <mat-form-field class="no-padding">\r\n                <input matInput #filter placeholder="Filter" [type]="[\'Long\', \'Integer\', \'BigDecimal\'].includes(col.dataType) ? \'number\' : \'text\'" (click)="$event.stopPropagation()" (keyup)="checkClose($event, menuTrigger)" [value]="getFilterValue(col)" (change)="onFilterChange($event, col)">\r\n                <button mat-icon-button matSuffix (click)="col.removeFilter()">\r\n                  <i class="fa far fa-times fa-fw"></i>\r\n                </button>\r\n              </mat-form-field>\r\n              <mat-radio-group class="filter-radio-group" [(ngModel)]="col.operator">\r\n                <mat-radio-button class="filter-radio-button" *ngFor="let operator of col.operators" [value]="operator" (change)="onOperatorChange(operator, col)">{{operator}}</mat-radio-button>\r\n              </mat-radio-group>\r\n            </ng-template>\r\n\r\n            <ng-template #dateFilterTemplate>\r\n              <button mat-icon-button class="no-padding" (click)="removeFilter(col)">\r\n                <i class="fa far fa-times fa-fw"></i>\r\n              </button>\r\n              <mat-form-field class="no-padding">\r\n                <input matInput [matDatepicker]="fromControlDatePicker" placeholder="From" (click)="$event.stopPropagation()" [value]="getFromDate(col)" (dateChange)="onFromDateChange($event, col)">\r\n                <mat-datepicker-toggle matSuffix [for]="fromControlDatePicker"></mat-datepicker-toggle>\r\n                <mat-datepicker #fromControlDatePicker></mat-datepicker>\r\n                <button mat-icon-button matSuffix (click)="$event.stopPropagation(); onFromDateChange(null, col)">\r\n                  <i class="fa far fa-times fa-fw"></i>\r\n                </button>\r\n              </mat-form-field>\r\n              <mat-form-field class="no-padding">\r\n                <input matInput [matDatepicker]="toControlDatePicker" placeholder="To" (click)="$event.stopPropagation()" [value]="getToDate(col)" (dateChange)="onToDateChange($event, col)">\r\n                <mat-datepicker-toggle matSuffix [for]="toControlDatePicker"></mat-datepicker-toggle>\r\n                <mat-datepicker #toControlDatePicker></mat-datepicker>\r\n                <button mat-icon-button matSuffix (click)="$event.stopPropagation(); onToDateChange(null, col)">\r\n                  <i class="fa far fa-times fa-fw"></i>\r\n                </button>\r\n              </mat-form-field>\r\n              <mat-radio-group class="filter-radio-group" [(ngModel)]="col.operator">\r\n                <mat-radio-button class="filter-radio-button" *ngFor="let operator of col.operators" [value]="operator" (change)="onOperatorChange(operator, col)">{{operator}}</mat-radio-button>\r\n              </mat-radio-group>\r\n            </ng-template>\r\n\r\n          </mat-menu>\r\n          <button mat-icon-button [matMenuTriggerFor]="appMenu" #menuTrigger="matMenuTrigger">\r\n            <ng-container *ngIf="col.isFilterSet == false">\r\n              <svg class="filter-icon no-filter-set" data-name="No filter set" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24.06 24.12">\r\n                <title>No filter set</title>\r\n                <polygon class="cls-1" points="10.3 19.93 10.3 12.94 4.46 5.87 19.43 5.87 13.58 13.05 13.58 19.93 10.3 19.93"\r\n                />\r\n                <path class="cls-2" d="M18.48,6.32l-5.15,6.32-.2.25v6.58H10.75V12.78l-.21-.26L5.42,6.32H18.48m1.9-.9H3.5L9.84,13.1v7.28H14V13.21l6.35-7.79Z"\r\n                />\r\n              </svg>\r\n            </ng-container>\r\n            <ng-container *ngIf="col.isFilterSet == true">\r\n              <svg class="filter-icon filter-set" data-name="Filter set" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24.06 24.12">\r\n                <title>Filter set</title>\r\n                <polygon class="cls-2" points="20.3 5.42 3.42 5.42 9.77 13.1 9.77 20.38 13.96 20.38 13.96 13.21 20.3 5.42"\r\n                />\r\n              </svg>\r\n            </ng-container>\r\n          </button>\r\n        </div>\r\n        <div class="flex-col" role="heading" *ngIf="i===0">\r\n            <button mat-icon-button [matMenuTriggerFor]="clearmenu" class="mat-icon-button-ellipsis"><i style="color: #000" class="fa fa-fw fa-ellipsis-v"></i></button>\r\n            <mat-menu #clearmenu="matMenu" [overlapTrigger]="false">\r\n                <button mat-menu-item class="mat-menu-item" (click)="reload()">\r\n                    <span class="fa fa-refresh"></span>\r\n                    <span>Refresh</span>\r\n                </button>\r\n                <button mat-menu-item class="mat-menu-item" (click)="removeFilters()">\r\n                    <span class="fa fa-filter"></span>\r\n                     <span>Clear filter</span>\r\n                </button>\r\n            </mat-menu>\r\n        </div>\r\n        <div mat-sort-header class="flex-col" role="heading" *ngIf="i!=0 && col.sortable != false">\r\n          {{ col.label }}\r\n        </div>\r\n        <div class="flex-col" role="heading" *ngIf="i!=0 && col.sortable == false">\r\n          {{ col.label }}\r\n        </div>\r\n      </header>\r\n    </th>\r\n\r\n    \x3c!-- Cell definition --\x3e\r\n    <td mat-cell *matCellDef="let element">\r\n      <ng-container *ngIf="col.cellRef; else defaultCellTemplate">\r\n        <ng-container *ngTemplateOutlet="col.cellRef;context:{row:element,col:col.name}"></ng-container>\r\n      </ng-container>\r\n\r\n      <ng-template #defaultCellTemplate>\r\n        {{ element[col.name] }}\r\n      </ng-template>\r\n    </td>\r\n  </ng-container>\r\n  <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: sticky"></tr>\r\n  <tr mat-row *matRowDef="let row; columns: displayedColumns;let index=index;"\r\n           [ngClass]="getRowClasses(index)"\r\n           [ngStyle]="getRowStyles(index)"\r\n           [attr.data-rowIndex]="index"\r\n           (click)="onRowClicked(row, $event)"></tr>\r\n</table>\r\n',styles:["[role=columnheader] header{position:relative;display:flex;align-items:center}[role=columnheader]:hover .action>button{visibility:visible}[role=columnheader] [role=heading]{flex:1}:host.striped [role=row]{background:#fff}:host.striped [role=row]:nth-child(even){background:#fefefe}::ng-deep .mat-table{display:table!important;width:100%}::ng-deep .mat-table>.mat-header-row,::ng-deep .mat-table>.mat-row{display:table-row;padding:0;border:none}::ng-deep .mat-table>.mat-header-row>.mat-cell,::ng-deep .mat-table>.mat-header-row>.mat-header-cell,::ng-deep .mat-table>.mat-row>.mat-cell,::ng-deep .mat-table>.mat-row>.mat-header-cell{display:table-cell;height:48px;vertical-align:middle;border-bottom:1px solid rgba(0,0,0,.12);padding-left:3px}::ng-deep .mat-table>.mat-header-row>.mat-cell,::ng-deep .mat-table>.mat-row>.mat-cell{border-left:1px solid rgba(0,0,0,.12)}::ng-deep .no-padding{max-height:3rem;padding:0 16px;overflow:hidden}::ng-deep .mat-column-actions{overflow:initial}::ng-deep .mat-column-actions .mat-card,::ng-deep .mat-column-actions mat-card{position:absolute}.action mat-menu{padding:0}.action mat-menu mat-form-field{width:100%;padding:0;margin:0}.mat-icon-button{width:18px}.mat-icon-button-ellipsis{width:40px}.filter-icon .cls-1{fill:#fff}.filter-icon .cls-2{fill:#1d1d1b}.filter-radio-group{display:flex;flex-direction:column;margin:15px 0}.filter-radio-button{margin:5px}"]}]}],t.ctorParameters=function(){return[{type:n.ElementRef}]},t.propDecorators={dataSource:[{type:n.Input}],selectedIndex:[{type:n.Input}],sticky:[{type:n.Input}],rowAttributes:[{type:n.Input}],columns:[{type:n.ContentChildren,args:[y]}],rowClicked:[{type:n.Output}],sort:[{type:n.ViewChild,args:[o.MatSort]}],displayedColumns:[{type:n.Input}],onClick:[{type:n.HostListener,args:["document:click",["$event"]]}]},t}(),T=function(){function t(){this.page=0,this.pageChange=new n.EventEmitter,this.total=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,100]}return t.prototype.ngOnInit=function(){},t.prototype.pageHandler=function(t){this.pageSize=t.pageSize,this.page=t.pageIndex,this.pageChange.emit(t)},t.decorators=[{type:n.Component,args:[{selector:"instant-grid-toolbar",template:'<mat-toolbar>\r\n  <header>\r\n    <ng-content></ng-content>\r\n  </header>\r\n  <mat-paginator [length]="total" [pageSize]="pageSize" (page)="pageHandler($event)" [pageSizeOptions]="pageSizeOptions"> </mat-paginator>\r\n</mat-toolbar>\r\n',styles:["mat-toolbar header{flex:1}.mat-paginator{background:0 0}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={page:[{type:n.Input}],pageChange:[{type:n.Output}],total:[{type:n.Input}],pageSize:[{type:n.Input}],pageSizeOptions:[{type:n.Input}]},t}(),C=function(){function t(t){this.grid=t,this.icon="ellipsis-v",this.showMenu=!1}return t.prototype.ngOnInit=function(){},t.prototype.onClick=function(e){var r=this;[].slice.call(this.grid.elRef.nativeElement.querySelectorAll("mat-cell.mat-column-actions")).filter(function(t){return!t.contains(e.target)}).forEach(function(t){var e=t.closest("mat-row"),n=[].slice.call(e.closest("mat-table").children).indexOf(e)-1;r.grid.dataSource.db.dataSnapshot[n].showMenu=!1})},t.decorators=[{type:n.Component,args:[{selector:"instant-grid-row-menu",template:'<mat-menu #rowMenu="matMenu">\r\n  <ng-content></ng-content>\r\n</mat-menu>\r\n\r\n<button type="button" mat-icon-button [matMenuTriggerFor]="rowMenu">\r\n  <i class="fa far fa-fw fa-{{ icon }}"></i>\r\n</button>\r\n',styles:[":host{position:relative}mat-card{position:absolute;z-index:100;right:0}"]}]}],t.ctorParameters=function(){return[{type:v}]},t.propDecorators={row:[{type:n.Input}],icon:[{type:n.Input}],onClick:[{type:n.HostListener,args:["document:click",["$event"]]}]},t}(),k=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{imports:[r.CommonModule,i.FormsModule,o.MatTableModule,o.MatSortModule,o.MatInputModule,o.MatCardModule,o.MatMenuModule,o.MatButtonModule,o.MatToolbarModule,o.MatPaginatorModule,o.MatRadioModule,o.MatDatepickerModule],declarations:[v,y,T,C],exports:[v,y,T,C],providers:[r.DatePipe],schemas:[n.CUSTOM_ELEMENTS_SCHEMA]}]}],t}(),w=function(n){function t(t){var e=n.call(this)||this;return e.db=t,e}return p(t,n),t.prototype.connect=function(){return this.db.dataChange},t.prototype.disconnect=function(){this.db.onDestroy()},t}(l.DataSource),D=function(){function t(){var o,a,i,l;this.sortCache={},this.filterChange=new s.BehaviorSubject(null),this.filterCache={},this.dataChange=new s.BehaviorSubject([]),this.dataReader=(o=this.onRead,void 0===(a=100)&&(a=300),void 0===i&&(i=!1),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this,r=i&&!l;clearTimeout(l),l=setTimeout(function(){l=null,i||o.apply(n,t)},a),r&&o.apply(n,t)})}return t.prototype.onInit=function(){var e=this;this.onRead(),this._dataChangeSubscriber=this.dataChange.subscribe(function(t){return e.dataSnapshot=t})},t.prototype.onDestroy=function(){this._dataChangeSubscriber.unsubscribe(),this._sortSubscriber.unsubscribe(),this._filterSubscriber.unsubscribe()},t.prototype.onRead=function(t,e){},t.prototype._configure=function(t){var e=this;Object.assign(this,t),this._sortSubscriber=this.sortChange.subscribe(function(t){e.sortCache={},e.sortCache[t.active]=t.direction,e.dataReader(e.sortCache,e.filterCache)}),this._filterSubscriber=this.filterChange.subscribe(function(t){e.filterCache[t.active]=t.filter,e.dataReader(e.sortCache,e.filterCache)}),this.onInit&&this.onInit()},t}(),S=function(){function t(t,e){this.route=t,this.router=e,this.subscriptions=[]}return t.prototype.ngOnInit=function(){var n=this;this.subscriptions.push(this.router.events.pipe(u.filter(function(t){return t instanceof m.NavigationEnd})).subscribe(function(t){console.log("url changed");var e=n.route.root;n.routeMap=n.getBreadcrumbs(e)}))},t.prototype.ngOnDestroy=function(){this.subscriptions.forEach(function(t){t&&t.unsubscribe()})},t.prototype.getBreadcrumbs=function(t,e,n){var r,o;void 0===e&&(e=""),void 0===n&&(n=[]);var a="breadcrumb",i=t.children;if(0===i.length)return n;try{for(var l=function p(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}(i),s=l.next();!s.done;s=l.next()){var u=s.value;if(u.outlet===m.PRIMARY_OUTLET){if(!u.snapshot.data.hasOwnProperty(a))return this.getBreadcrumbs(u,e,n);e+="/"+u.snapshot.url.map(function(t){return t.path}).join("/");var c={label:u.snapshot.data[a],params:u.snapshot.params,url:e};return n.push(c),this.getBreadcrumbs(u,e,n)}}}catch(f){r={error:f}}finally{try{s&&!s.done&&(o=l["return"])&&o.call(l)}finally{if(r)throw r.error}}},t.decorators=[{type:n.Component,args:[{selector:"instant-breadcrumb",template:'<a [routerLink]="[\'/\']"><i class="fa far fa-fw fa-home"></i></a>\r\n<a *ngFor="let route of routeMap" [routerLink]="[route.url]">{{ route.label }}</a>\r\n',styles:[":host{flex:1}"]}]}],t.ctorParameters=function(){return[{type:m.ActivatedRoute},{type:m.Router}]},t}(),F=function(){function t(){}return t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),I=function(){function t(t){this.toolbarService=t}return Object.defineProperty(t.prototype,"actionsRef",{get:function(){return this.toolbarService.actionTemplate},enumerable:!0,configurable:!0}),t.decorators=[{type:n.Component,args:[{selector:"instant-form-actions",template:'<ng-container *ngIf="actionsRef; else defaultTemplate">\r\n  <ng-container *ngTemplateOutlet="actionsRef"></ng-container>\r\n</ng-container>\r\n\r\n<ng-template #defaultTemplate></ng-template>\r\n',styles:[""]}]}],t.ctorParameters=function(){return[{type:F}]},t}(),x=function(){function t(t,e){this.template=t,this.toolbar=e}return t.prototype.ngOnInit=function(){this.toolbar.actionTemplate=this.template},t.prototype.ngOnDestroy=function(){this.toolbar.actionTemplate=null},t.decorators=[{type:n.Directive,args:[{selector:"[instantFormActionsDef]"}]}],t.ctorParameters=function(){return[{type:n.TemplateRef},{type:F}]},t}(),M=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{imports:[r.CommonModule,m.RouterModule],declarations:[S,I,x],exports:[S,I,x],providers:[F]}]}],t}();t.GridModule=k,t.GridComponent=v,t.ColumnDirective=y,t.GridRowMenuComponent=C,t.InstantDataSource=w,t.InstantDatabase=D,t.ToolbarModule=M,t.BreadcrumbComponent=S,t.FormActionsComponent=I,t.FormActionsDefDirective=x,t.ToolbarService=F,t.ɵa=T,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=instant.umd.min.js.map